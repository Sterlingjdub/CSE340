<% if(title) { %>
<h1>
    <%= title %>
</h1>
<% } else { res.redirect('/'); } %>

<%- messages() %>
<% if (errors) { %>
<ul class="notice">
    <% errors.array().forEach(error=> { %>
    <li>
        <%= error.msg %>
    </li>
    <% }) %>
</ul>
<% } %>

<h2> Welcome <%- welcomeBasic  %> </h2>

<form id="updateAccount" action="/account/update-information/" method="post">
    <fieldset>
        <legend>
            <h3 id="form-h3">Edit Account</h3>
        </legend>
        <br>
        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" name="account_firstname" required value="<%= locals.account_firstname %>">
        <br>
        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" name="account_lastname" required value="<%= locals.account_lastname %>">
        <br>
        <label for="email">Email Address:</label>
        <input type="email" id="email" name="account_email" required value="<%= locals.account_email %>">
        <br>
        <input type="submit" id="update-accountButton" value="Update Account Info" disabled>
        <input type="hidden" name="account_id" <% if(account_id) { %> value="<%= locals.account_id %>" <% } %>>
        <br>
    </fieldset>
</form>

<form id="updatePwdForm" action="/account/update-password" method="post">
    <fieldset id="updatePwd">
        <legend>
            <h3 id="form-h3">Change Password</h3>
        </legend>
        <label for="account_password">Password</label>
        <input type="password" id="account_password" name="account_password" required
            pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"><br>
        <div id="pwdRegEx">
            Passwords must be at least 12 characters and contain at least 1
            number, 1 capital letter and 1 special character
        </div>
        <input type="submit" id="updatePwdBtn" value="Save New Password"><br>
        <input type="hidden" name="account_id" <% if(account_id) { %> value="<%= locals.account_id %>" <% } %>>
    </fieldset>
</form>

<script src="/js/account-update.js" type="module"></script>